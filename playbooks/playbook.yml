- name: All servers setup
  hosts: all
  become_method: sudo
  connection: local

  vars_files:
    - includes/main-vars.yml

  pre_tasks:
    - include_tasks: tasks/apt.yml
    - include_tasks: tasks/flatpak.yml
    - include_tasks: tasks/extensions.yml
    - include_tasks: tasks/zsh.yml

  roles:
    - role: ansible-role-docker
      become: true
    - role: ansible-role-customize-gnome
      become: true
      vars:
        gnome_extensions:
        - id: 8
        - id: 517
        - id: 4679
        - url: "https://github.com/harshadgavali/gnome-gesture-improvements/files/14779174/gestureImprovements46%40gestures.zip"
          name: gestureImprovements@gestures
        customize_gnome__skip_restart_gnome_shell: true

  post_tasks:
    - include_tasks: tasks/services-enable.yml
